# üé≠ 10.Â∞ÅË£ÖajaxËØ∑Ê±Ç



## üìù È¢òÁõÆÊèèËø∞
* Â∞ÅË£Ö ajax ËØ∑Ê±Ç
 * @param {string|object} options ËØ∑Ê±ÇÈÖçÁΩÆÊàñURL
 * @param {string} options.url ËØ∑Ê±ÇÂú∞ÂùÄ
 * @param {string} options.method ËØ∑Ê±ÇÊñπÊ≥ï
 * @param {object} options.headers ËØ∑Ê±ÇÂ§¥
 * @param {object} options.data ËØ∑Ê±ÇÊï∞ÊçÆ
 * @param {number} options.timeout Ë∂ÖÊó∂Êó∂Èó¥

## üìé ‰ª£Á†ÅÂÆûÁé∞
```typescript
/**
 * Â∞ÅË£Ö ajax ËØ∑Ê±Ç
 * @param {string|object} options ËØ∑Ê±ÇÈÖçÁΩÆÊàñURL
 * @param {string} options.url ËØ∑Ê±ÇÂú∞ÂùÄ
 * @param {string} options.method ËØ∑Ê±ÇÊñπÊ≥ï
 * @param {object} options.headers ËØ∑Ê±ÇÂ§¥
 * @param {object} options.data ËØ∑Ê±ÇÊï∞ÊçÆ
 * @param {number} options.timeout Ë∂ÖÊó∂Êó∂Èó¥
 */
function axios(options) {
    if (typeof options === 'string') {
        options = {
            url: options
        }
    }
    const {
        url,
        method = 'GET',
        headers = {},
        data = null,
        timeout = 5000
    } = options

    return new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest()

        // ËÆæÁΩÆË∂ÖÊó∂
        xhr.timeout = timeout
        xhr.ontimeout = () => reject(new Error('ËØ∑Ê±ÇË∂ÖÊó∂'))

        // ÁõëÂê¨ËØ∑Ê±ÇÁä∂ÊÄÅ
        xhr.onreadystatechange = function () {
            if (this.readyState !== 4) return

            if (this.status >= 200 && this.status < 400) {
                let response
                try {
                    response = JSON.parse(this.response)
                } catch (e) {
                    response = this.response
                }
                resolve(response)
            } else {
                reject(new Error(this.statusText || 'ËØ∑Ê±ÇÂ§±Ë¥•'))
            }
        }

        // ÈîôËØØÂ§ÑÁêÜ
        xhr.onerror = function () {
            reject(new Error(this.statusText || 'ÁΩëÁªúÈîôËØØ'))
        }

        // Â§ÑÁêÜËØ∑Ê±ÇÊñπÊ≥ï
        xhr.open(method.toUpperCase(), url, true)

        // ËÆæÁΩÆÈªòËÆ§ËØ∑Ê±ÇÂ§¥
        xhr.setRequestHeader('Content-Type', 'application/json')
        xhr.setRequestHeader('Accept', 'application/json')

        // ËÆæÁΩÆËá™ÂÆö‰πâËØ∑Ê±ÇÂ§¥
        Object.keys(headers).forEach(key => {
            xhr.setRequestHeader(key, headers[key])
        })

        // ÂèëÈÄÅËØ∑Ê±Ç
        let body = null
        if (data) {
            body = typeof data === 'object' ? JSON.stringify(data) : data
        }
        xhr.send(body)
    })
}

// Ê∑ªÂä†‰æøÊç∑ÊñπÊ≥ï
axios.get = function (url, options = {}) {
    return axios({
        ...options,
        url,
        method: 'GET'
    })
}

axios.post = function (url, data, options = {}) {
    return axios({
        ...options,
        url,
        method: 'POST',
        data
    })
}

// ‰ΩøÁî®Á§∫‰æã
async function example() {
    try {
        // GET ËØ∑Ê±Ç
        const getData = await axios.get('https://api.example.com/data', {
            headers: {
                'Authorization': 'Bearer token'
            },
            timeout: 3000
        })

        // POST ËØ∑Ê±Ç
        const postData = await axios.post('https://api.example.com/create', {
            name: 'test',
            age: 18
        }, {
            headers: {
                'X-Custom-Header': 'value'
            }
        })

        // Áõ¥Êé•‰ΩøÁî®
        const response = await axios({
            url: 'https://api.example.com/update',
            method: 'PUT',
            data: { id: 1 },
            headers: {
                'Authorization': 'Bearer token'
            }
        })
    } catch (error) {
        console.error('ËØ∑Ê±ÇÂ§±Ë¥•:', error.message)
    }
}
```
