# ğŸª 18.json.parse.TODO



## ğŸ“‘ é¢˜ç›®æè¿°
æš‚æ— é¢˜ç›®æè¿°

## ğŸ“‘ ä»£ç å®ç°
```typescript
function jsonParse(str) {
    // å»é™¤ç©ºç™½å­—ç¬¦
    str = str.trim();

    // è®°å½•å½“å‰è§£æä½ç½®
    let i = 0;

    // è§£æä¸»å‡½æ•°
    function parseValue() {
        const char = str[i];

        if (char === '{') return parseObject();
        if (char === '[') return parseArray();
        if (char === '"') return parseString();
        if (char === 't') return parseTrue();
        if (char === 'f') return parseFalse();
        if (char === 'n') return parseNull();
        return parseNumber();
    }

    // è§£æå¯¹è±¡
    function parseObject() {
        i++; // è·³è¿‡ '{'
        const result = {};

        while (i < str.length) {
            if (str[i] === '}') {
                i++;
                return result;
            }

            if (str[i] === ',') {
                i++;
                continue;
            }

            // è§£æé”®
            const key = parseString();
            i++; // è·³è¿‡ ':'
            // è§£æå€¼
            const value = parseValue();
            result[key] = value;
        }
        return result;
    }

    // è§£ææ•°ç»„
    function parseArray() {
        i++; // è·³è¿‡ '['
        const result = [];

        while (i < str.length) {
            if (str[i] === ']') {
                i++;
                return result;
            }

            if (str[i] === ',') {
                i++;
                continue;
            }

            const value = parseValue();
            result.push(value);
        }
        return result;
    }

    // è§£æå­—ç¬¦ä¸²
    function parseString() {
        i++; // è·³è¿‡å¼€å§‹çš„åŒå¼•å·
        let result = '';

        while (str[i] !== '"') {
            if (str[i] === '\\') {
                i++;
                if (str[i] === 'n') result += '\n';
                else if (str[i] === 'r') result += '\r';
                else if (str[i] === 't') result += '\t';
                else result += str[i];
            } else {
                result += str[i];
            }
            i++;
        }

        i++; // è·³è¿‡ç»“æŸçš„åŒå¼•å·
        return result;
    }

    // è§£ææ•°å­—
    function parseNumber() {
        let start = i;
        while (i < str.length && /[\d.+-e]/i.test(str[i])) {
            i++;
        }
        return Number(str.slice(start, i));
    }

    // è§£æ true
    function parseTrue() {
        i += 4; // è·³è¿‡ 'true'
        return true;
    }

    // è§£æ false
    function parseFalse() {
        i += 5; // è·³è¿‡ 'false'
        return false;
    }

    // è§£æ null
    function parseNull() {
        i += 4; // è·³è¿‡ 'null'
        return null;
    }

    return parseValue();
}

// æµ‹è¯•ç”¨ä¾‹
const testCases = [
    '{"name":"å¼ ä¸‰","age":25,"married":false,"children":null}',
    '[1,2,3,"4",true,null]',
    '{"scores":[90,85,88],"pass":true}',
    '"Hello\\nWorld"',
    '123.456',
    'true',
    'false',
    'null'
];

testCases.forEach((test, index) => {
    console.log(`æµ‹è¯•ç”¨ä¾‹ ${index + 1}:`);
    console.log('è‡ªå®šä¹‰å®ç°:', jsonParse(test));
    console.log('åŸç”Ÿå®ç°:', JSON.parse(test));
    console.log('---');
});
```
