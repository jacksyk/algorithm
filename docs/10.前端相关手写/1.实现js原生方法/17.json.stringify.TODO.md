# â­ 17.json.stringify.TODO



## ðŸ“‘ é¢˜ç›®æè¿°
https://juejin.cn/post/6844903861971320846?searchId=20240811235902CCC1D8113CE9807307E3

## ðŸ“‹ ä»£ç å®žçŽ°
```typescript
/** https://juejin.cn/post/6844903861971320846?searchId=20240811235902CCC1D8113CE9807307E3 */
/** https://juejin.cn/post/6844903861971320846?searchId=20240811235902CCC1D8113CE9807307E3 */

function jsonStringify(data) {
    // å¤„ç†åŸºç¡€ç±»åž‹
    if (data === null) return 'null';
    if (data === undefined) return undefined;
    if (typeof data === 'boolean') return data.toString();
    if (typeof data === 'number') {
        return isFinite(data) ? data.toString() : 'null';
    }
    if (typeof data === 'string') return `"${data}"`;
    if (typeof data === 'symbol') return undefined;
    if (typeof data === 'function') return undefined;

    // å¤„ç†æ•°ç»„
    if (Array.isArray(data)) {
        const items = data.map(item => jsonStringify(item) ?? 'null');
        return `[${items.join(',')}]`;
    }

    // å¤„ç†å¯¹è±¡
    if (typeof data === 'object') {
        // å¤„ç†æ—¥æœŸå¯¹è±¡
        if (data instanceof Date) {
            return `"${data.toISOString()}"`;
        }

        // å¤„ç†æ­£åˆ™å¯¹è±¡
        if (data instanceof RegExp) {
            return '{}';
        }

        const items = Object.entries(data)
            .filter(([_, value]) => value !== undefined && typeof value !== 'function')
            .map(([key, value]) => `"${key}":${jsonStringify(value)}`);

        return `{${items.join(',')}}`;
    }
}

// æµ‹è¯•ç”¨ä¾‹
const testCases = [
    // åŸºç¡€ç±»åž‹
    null,
    undefined,
    true,
    123,
    "hello",
    Symbol(),
    () => { },
    NaN,
    Infinity,

    // æ•°ç»„
    [1, "2", true, null, undefined],

    // å¯¹è±¡
    {
        name: "å¼ ä¸‰",
        age: 25,
        married: false,
        children: null,
        symbol: Symbol(),
        func: function () { },
        date: new Date(),
        reg: /test/,
        undef: undefined
    }
];

// æµ‹è¯•å¹¶æ¯”è¾ƒç»“æžœ
testCases.forEach((test, index) => {
    console.log(`æµ‹è¯•ç”¨ä¾‹ ${index + 1}:`);
    console.log('è‡ªå®šä¹‰å®žçŽ°:', jsonStringify(test));
    console.log('åŽŸç”Ÿå®žçŽ°:', JSON.stringify(test));
    console.log('---');
});
```
