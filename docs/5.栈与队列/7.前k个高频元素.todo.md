# ğŸ“š 7.å‰kä¸ªé«˜é¢‘å…ƒç´ .todo

## ğŸ’» ä»£ç å®ç°
```typescript
// @ts-nocheck
/**
 * @url https://leetcode.cn/problems/top-k-frequent-elements/description/
 */
// psï¼šåŸºäºå †ï¼Œæ ¹æ®é¢‘ç‡æ•°é‡å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number[]}
 */
class MaxHeap {
    constructor() {
        this.heap = [] // [num, count]
    }
    getParentIndex(index) {
        return Math.floor((index - 1) / 2)
    }

    getLeftChildren(index) {
        return 2 * index + 1
    }

    getRightChildren(index) {
        return 2 * index + 2
    }

    shiftUp(index) {
        if (index === 0) return
        const parentIdx = this.getParentIndex(index)
        if (this.heap[index][1] > this.heap[parentIdx][1]) {
            this.swap(index, parentIdx)
            this.shiftUp(parentIdx)
        }
    }

    shiftDown(index) {

        const leftChildIndex = this.getLeftChildren(index)
        const rightChildIndex = this.getRightChildren(index)
        if (leftChildIndex >= this.heap.length) return // å¦‚æœå·¦å­èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œè¯´æ˜æ˜¯å¶å­èŠ‚ç‚¹

        let largest = index
        // å…ˆæ¯”è¾ƒå·¦å­èŠ‚ç‚¹
        if (this.heap[leftChildIndex][1] > this.heap[largest][1]) {
            largest = leftChildIndex
        }
        // å†æ¯”è¾ƒå³å­èŠ‚ç‚¹ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰
        if (rightChildIndex < this.heap.length && this.heap[rightChildIndex][1] > this.heap[largest][1]) {
            largest = rightChildIndex
        }

        if (largest !== index) {
            this.swap(index, largest)
            this.shiftDown(largest)
        }
    }

    // äº¤æ¢ä¸¤ä¸ªå…ƒç´ 
    swap(left, right) {
        const leftVal = this.heap[left]
        this.heap[left] = this.heap[right]
        this.heap[right] = leftVal
    }

    insertNode(val) {
        this.heap.push(val)
        this.shiftUp(this.heap.length - 1)
    }

    peek() {
        if (this.heap.length === 0) return null
        const val = this.heap[0]
        this.heap[0] = this.heap[this.heap.length - 1]
        this.heap.pop()
        this.shiftDown(0)
        return val
    }
}


var topKFrequent = function (nums, k) {
    const map = new Map()

    for (let i = 0; i < nums.length; i++) {
        map.set(nums[i], (map.get(nums[i]) ?? 0) + 1)
    }
    console.log(map)

    const maxHeap = new MaxHeap()
    for (let [item, frequency] of map.entries()) {
        maxHeap.insertNode([item, frequency])
    }
    const res = []
    let count = 0
    while (count < k) {
        const top = maxHeap.peek()
        res.push(top[0])
        count++
    }

    return res
};
```
